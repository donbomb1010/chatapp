<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ConnectChat - Modern Messaging</title>

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/dark-mode.css" id="dark-mode-style" disabled />
</head>
<body>

  <!-- LOGIN / SIGNUP MODAL -->
  <div class="auth-modal" id="login-modal" style="display: flex;">
    <div class="auth-container">
      <div class="auth-header">
        <h2 id="auth-title">Login</h2>
        <p id="auth-subtitle">Welcome back â€” please sign in.</p>
      </div>
      <form id="auth-form">
        <div class="form-group">
          <input type="email" id="auth-email" placeholder="Email" required />
        </div>
        <div class="form-group">
          <input type="password" id="auth-password" placeholder="Password" required />
        </div>
        <button type="submit" class="btn-primary" id="auth-submit-btn">Login</button>
      </form>
      <p style="text-align:center; margin-top:10px;">
        <span id="toggle-auth-mode">
          Don't have an account? <a href="#">Sign up</a>
        </span>
      </p>
    </div>
  </div>

  <!-- PROFILE SETUP MODAL -->
  <div class="auth-modal" id="profile-setup-modal" style="display: none;">
    <div class="auth-container">
      <div class="auth-header">
        <h2>Create Your Profile</h2>
        <p>Set your display name and status</p>
      </div>
      <form id="profile-form">
        <div class="form-group">
          <input type="text" id="username" placeholder="Your name" required />
        </div>
        <div class="form-group">
          <input type="text" id="user-status" placeholder="Status (e.g. Available)" />
        </div>
        <button type="submit" class="btn-primary">Save & Continue</button>
      </form>
    </div>
  </div>

  <!-- MAIN CHAT APP -->
  <div class="app-container" id="app-container" style="display: none;">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="user-profile">
          <div class="avatar" id="current-user-avatar"></div>
          <div class="user-info">
            <span id="current-username">User</span>
            <span id="current-status">Online</span>
          </div>
        </div>
        <div>
          <button class="btn-icon" id="theme-toggle" title="Toggle Theme">
            <i class="fas fa-moon"></i>
          </button>
          <button class="btn-icon" id="logout-btn" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>

      <div class="sidebar-tabs">
        <button class="tab-btn active" data-tab="chats">
          <i class="fas fa-comment"></i> Chats
        </button>
        <button class="tab-btn" data-tab="friends">
          <i class="fas fa-user-friends"></i> Friends
        </button>
        <button class="tab-btn" data-tab="groups">
          <i class="fas fa-users"></i> Groups
        </button>
      </div>

      <div class="search-box">
        <input type="text" id="global-search" placeholder="Search..." />
        <i class="fas fa-search"></i>
      </div>

      <div class="tab-content active" id="chats-tab">
        <div id="chats-list"></div>
      </div>

      <div class="tab-content" id="friends-tab">
        <div class="friends-actions">
          <input id="add-friend-email" placeholder="Find user by email" />
          <button class="btn-small" id="send-friend-request-btn">Send Request</button>
        </div>
        <div class="friends-list" id="friends-list"></div>
        <h4>Friend Requests</h4>
        <div id="received-requests-list"></div>
      </div>

      <div class="tab-content" id="groups-tab">
        <button class="btn-small" id="create-group-btn">
          <i class="fas fa-plus"></i> New Group
        </button>
        <div class="groups-list"></div>
      </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-area">
      <div class="empty-state" id="empty-chat">
        <i class="fas fa-comments"></i>
        <h3>Select a chat to start messaging</h3>
        <p>Or create a new conversation</p>
      </div>

      <div class="active-chat" id="active-chat" style="display: none; flex-direction: column; height: 100%;">
        <div class="chat-header">
          <div class="chat-info">
            <div class="chat-avatar" id="chat-avatar"></div>
            <div>
              <h3 id="chat-name">Chat Name</h3>
              <p id="chat-status">Online</p>
            </div>
          </div>
        </div>

        <!-- Scrollable messages container -->
        <div class="messages-container" id="messages-container" style="flex: 1; overflow-y: auto; padding: 10px; background: #fff;"></div>

        <!-- Fixed input area -->
        <div class="message-input-container" style="display: flex; padding: 10px; border-top: 1px solid #ddd; background: #f9f9f9;">
          <textarea
            id="message-input"
            placeholder="Type a message..."
            style="flex: 1; resize: none; border-radius: 6px; border: 1px solid #ccc; padding: 8px; height: 40px; margin-right: 8px;"
          ></textarea>
          <button
            class="btn-icon"
            id="send-btn"
            style="padding: 8px 12px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer;"
          >
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODULE SCRIPTS -->
  <script type="module" src="js/firebase-config.js"></script>
  <script type="module" src="js/utils.js"></script>
  <script type="module" src="js/auth.js"></script>
  <script type="module" src="js/friends.js"></script>
  <script type="module" src="js/chat.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
